#### （1）第一步：客户端本地初步排查（先确认客户端自身问题）

1. 检查目标地址和端口是否正确

   - 确认服务器的 IP 地址 / 域名是否正确（避免拼写错误，如将 192.168.1.100 写成 192.168.1.101）。
   - 确认服务器的端口是否正确（避免端口号错误，如将 8080 写成 8081，且目标端口是否已在服务端开放）。
   - 验证方式：直接 ping 服务器 IP（`ping 服务器IP`），查看是否能 ping 通（ping 基于 ICMP 协议，仅验证网络连通性，不验证端口是否开放）。

   

2. 检查客户端本地网络是否正常

   - 确认客户端是否能正常访问其他网络资源（如访问百度、其他服务器），排除客户端本地断网、网卡故障等问题。
   - 检查客户端本地防火墙 / 杀毒软件是否拦截了对目标服务器的连接（如 Windows 防火墙、360 杀毒等，可临时关闭防火墙进行测试）。
   - 检查客户端本地的 hosts 文件是否有异常配置（Windows：`C:\Windows\System32\drivers\etc\hosts`；Linux：`/etc/hosts`），避免域名被解析到错误的 IP。

   

3. 使用工具测试客户端到服务器的端口连通性

   - Windows：使用`telnet 服务器IP 端口`（需先开启 telnet 功能），或`Test-NetConnection 服务器IP -Port 端口`（PowerShell 命令）。
   - Linux/Mac：使用`telnet 服务器IP 端口`，或`nc -zv 服务器IP 端口`（netcat 工具，更强大，推荐）。
   - 结果判断：若提示「连接成功」，说明网络层面连通；若提示「连接超时」「拒绝连接」，说明网络或服务端存在问题，进入下一步排查。

   

#### （2）第二步：网络链路排查（排查客户端与服务器之间的网络问题）

1. 检查网络链路是否通畅（ traceroute/mtr 工具）

   - Windows：使用`tracert 服务器IP`（跟踪数据包从客户端到服务器的路由路径）。
   - Linux/Mac：使用`traceroute 服务器IP`，或`mtr 服务器IP`（更强大，结合了 ping 和 traceroute 的功能，实时显示路由节点的丢包率和延迟）。
   - 结果判断：查看路由路径中是否有节点出现高丢包率、高延迟，或数据包无法到达目标服务器，若有，说明中间网络（如路由器、交换机、运营商网络）存在问题，需联系网络管理员或运营商排查。

   

2. 检查防火墙 / 网关 / 安全组是否拦截连接

   - 云服务器（阿里云 / 腾讯云 / 华为云）：检查服务器的「安全组」配置，确认目标端口是否已开放（入方向规则允许客户端 IP 访问），避免安全组拦截连接。
   - 服务器所在局域网：检查网关、防火墙（如 iptables、firewalld）的配置，确认目标端口是否已开放，是否有拦截规则。
   - 验证方式：临时关闭服务器的防火墙（Linux：`systemctl stop firewalld`/`service iptables stop`），重新测试端口连通性，若能连通，说明防火墙规则问题，需调整防火墙配置。

   

3. 检查 NAT 设备 / 代理服务器是否存在问题

   - 若客户端或服务器通过 NAT 设备（如路由器）、代理服务器（如正向代理、反向代理）访问，检查 NAT 设备的端口映射是否正确，代理服务器是否正常运行，是否有拦截规则。

   

#### （3）第三步：服务端排查（排查服务器自身和应用的问题）

1. 检查服务器是否正常运行

   - 确认服务器是否已开机，是否能正常登录（如通过 SSH、远程桌面登录服务器），若无法登录，说明服务器宕机或硬件故障，需联系服务器管理员排查。

   

2. 检查目标服务是否已启动，且监听在目标端口上

   - Linux：使用`netstat -tulpn | grep 端口`（查看端口监听状态），或`ss -tulpn | grep 端口`（更高效）。

   - Windows：使用`netstat -ano | grep 端口`（查看端口监听状态和对应的进程 ID）。

   - 结果判断：

     - 若显示「LISTEN」状态，且对应的进程是目标应用，说明服务已启动并监听端口。
     - 若未显示该端口的监听状态，说明目标服务未启动，或启动失败，进入下一步排查。

     

   

3. 检查目标服务启动日志，排查启动失败原因

   - 查看应用的启动日志（如 Java 应用的日志、Nginx 的日志、MySQL 的日志），寻找启动失败的错误信息（如端口被占用、配置文件错误、内存溢出等）。
   - 检查端口是否被其他进程占用：若端口被其他进程占用，目标服务无法启动，可通过`netstat`工具找到占用端口的进程，终止该进程，或修改目标服务的端口。

   

4. 检查服务端的资源是否充足

   - 检查服务器的 CPU、内存、磁盘空间是否充足（Linux：`top`/`free -m`/`df -h`；Windows：任务管理器），若资源耗尽（如内存溢出、磁盘满），会导致服务无法启动或无法处理连接请求。

   

5. 测试服务端本地是否能访问目标端口

   - 在服务器本地，使用`telnet 127.0.0.1 端口`或`nc -zv 127.0.0.1 端口`，测试本地是否能访问目标端口。
   - 结果判断：若本地能访问，说明服务正常，问题出在网络链路（如防火墙、安全组）；若本地无法访问，说明服务本身存在问题，需进一步排查服务配置。

   

#### （4）第四步：总结与兜底

1. 排查顺序：先客户端，再网络，最后服务端，层层递进，逐一排除。
2. 关键工具：ping、telnet、nc、traceroute/mtr、netstat/ss、top/free/df。
3. 兜底方案：若以上步骤仍无法排查出问题，可尝试重启目标服务、重启服务器，或联系专业的网络管理员 / 运维工程师协助排查。
